<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vivara - Termo de Responsabilidade</title>
    <link rel="shortcut icon" href="imagens/tellerina-icon.png" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <style>
        /* Coloca todos os labels como bloco */
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }

        /* Inputs e textareas ficam abaixo do label */
        input, textarea, select {
            display: block;
            margin-bottom: 15px;
            width: 100%; /* opcional: ocupa largura total */
            padding: 5px;
            box-sizing: border-box;
        }

        /* Para checklists, deixar os radios em linha */
        .checklist input[type="radio"] {
            display: inline-block;
            width: auto;
            margin-right: 5px;
        }

        .checklist label {
            display: inline-block;
            margin-right: 15px;
            font-weight: normal;
        }

        /* Details com textarea ocupando largura */
        details textarea {
            width: 100%;
            margin-top: 5px;
            padding: 5px;
            box-sizing: border-box;
        }
    </style>
</head>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Cossette+Titre:wght@400;700&family=Roboto:ital,wdth@0,75..100;1,75..100&display=swap');

    body{
        background-color: #ECA57F;
    }

    header{
        text-align: center;
        font-family: "Roboto", sans-serif;;
        text-shadow: -1px 1px 20px black;
    }

    h5{
        text-align: center;
        font-size: 20px;
        font-family: "Roboto", sans-serif;;
    }

    fieldset{
        width: 1000px;
        margin: 0 auto;
        border-radius: 10px;
        margin-bottom: 40px;
    }

    legend{
        text-align: center;
        font-size: 20px;
    }

    label{
        font-size: 20px;
        text-align: justify;
        font-family: Arial, Helvetica, sans-serif;
    }

    input{
        border-radius: 20px;
        width: 700px;
    }

    .checklist{
        border-style: solid;
        border-color: #e2976e;
    }

    button {
        display: block;
        margin: 20px auto;
        padding: 10px 20px;
        font-size: 18px;
        cursor: pointer;
    }
</style>

<body>

    <header>
        <h1>Termo de Responsabilidade WEB</h1>
        <img src="imagens/vivara-logo.png" alt="" width="200px" height="50px">
    </header>

    <main>
        <h5>Preencha todos as informações e imprima em PDF para gerar o Termo</h5>
        <label for="nome-responsavel">Termo Gerado por:
            <input type="text" id="responsavel">
        </label>


        <fieldset>
            <legend>Dados do Colaborador</legend>
            <div class="nome-matricula">
                <label for="nome-colaborador">Nome do Colaborador</label>
                <input type="text" id="nome-colaborador">

                <label for="matricula-colaborador">Matricula - RE</label>
                <input type="text" id="matricula-colaborador">
            </div>

            <div class="cargo-departamento-email">
                <label for="cargo-colaborador">Cargo</label>
                <input type="text" id="cargo-colaborador">

                <label for="departamento-colaborador">Departamento</label>
                <input type="text" id="departamento-colaborador">

                <label for="email-colaborador">E-mail</label>
                <input type="email" id="email-colaborador">
            </div>
        </fieldset>

        <fieldset>
            <legend>Informações do Equipamento</legend>
            <div class="div-equipamento">
                <label for="equipamento">Equipamento - Tipo</label>
                <input type="text" id="equipamento">

                <label for="marca">Marca</label>
                <input type="text" id="marca">

                <label for="modelo">Modelo</label>
                <input type="text" id="modelo">

                <label for="numero-serie">S/N - Número de Série</label>
                <input type="text" id="numero-serie">

                <label for="Patrimônio">Patrimônio</label>
                <input type="text" id="Patrimônio">
            </div>
        </fieldset>

        <fieldset>
            <legend>Checklist Geral - Onboarding</legend>

            <div class="checklist">
                <label>Fotos tiradas e anexadas no termo?</label><br>
                <input type="radio" name="fotos-anexadas" value="Sim"> <label>Sim</label>
                <input type="radio" name="fotos-anexadas" value="Não"> <label>Não</label>
            </div>

            <div class="checklist">
                <label>Conector Fonte</label> <br>
                <input type="radio" name="conector-fonte" value="Em Condições"> <label>Em Condições</label>
                <input type="radio" name="conector-fonte" value="Danificado"> <label>Danificado</label>
            </div>

            <div class="checklist">
                <label>Carregador - Cabo de Energia tipo C</label> <br>
                <input type="radio" name="carregador" value="Em Condições"> <label>Em Condições</label>
                <input type="radio" name="carregador" value="Danificado"> <label>Danificado</label>
            </div>

            <div class="checklist">
                <label>Conectores USB, HDMI, ETHERNET, ETC.</label> <br>
                <input type="radio" name="conectores" value="Em Condições"> <label>Em Condições</label>
                <input type="radio" name="conectores" value="Danificado"> <label>Danificado</label>
            </div>

            <div class="checklist">
                <label>Parafusos da Carcaça</label> <br>
                <input type="radio" name="parafusos" value="Em Condições"> <label>Em Condições</label>
                <input type="radio" name="parafusos" value="Faltando"> <label>Faltando</label>

                <details>
                    <summary>Faltando parafusos? Informe aqui</summary>
                    <textarea id="obs-parafusos"></textarea>
                </details>
            </div>

            <div class="checklist">
                <label>Estado do Teclado</label> <br>
                <input type="radio" name="teclado-estado" value="Em Condições"> <label>Em Condições</label>
                <input type="radio" name="teclado-estado" value="Danificado"> <label>Danificado</label>
                <textarea id="obs-teclado" placeholder="Informe Observações"></textarea>
            </div>

            <div class="checklist">
                <label>Estado do Touchpad</label>
                <input type="radio" name="touchpad-estado" value="Em Condições"> <label>Em Condições</label>
                <input type="radio" name="touchpad-estado" value="Danificado"> <label>Danificado</label>
                <textarea id="obs-touchpad" placeholder="Informe Observações"></textarea>
            </div>
        </fieldset>

        <fieldset>
            <legend>Fotos do Equipamento Entregue</legend>
            <label for="tela">Tela</label>
            <input type="file" id="tela" accept="image/jpeg, image/png">

            <label for="teclado-foto">Teclado</label>
            <input type="file" id="teclado-foto" accept="image/jpeg, image/png">

            <label for="lateral-direita">Lateral Direita</label>
            <input type="file" id="lateral-direita" accept="image/jpeg, image/png">

            <label for="lateral-esquerda">Lateral Esquerda</label>
            <input type="file" id="lateral-esquerda" accept="image/jpeg, image/png">

            <label for="tampa-fechada">Tampa Fechada</label>
            <input type="file" id="tampa-fechada" accept="image/jpeg, image/png">
        </fieldset>

        <button onclick="gerarPDF()">Baixar Termo em PDF</button>

    </main>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script>
        async function gerarPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            let yOffset = 15;

            // Função para ler o arquivo de imagem e retornar uma Promessa
            const readImage = (file) => {
                return new Promise((resolve) => {
                    const reader = new FileReader();
                    reader.onload = () => resolve(reader.result);
                    reader.readAsDataURL(file);
                });
            };

            // ----------------------------------------------------
            // CÓDIGO DO CABEÇALHO
            // ----------------------------------------------------
            const logoTellerina = 'imagens/tellerina-icon.png'; 
            doc.addImage(logoTellerina, 'PNG', 15, 10, 50, 15);
            yOffset = 40;

            doc.setFontSize(14);
            doc.text("TERMO DE RESPONSABILIDADE DE EQUIPAMENTOS DE TI", 105, yOffset, null, null, "center");
            yOffset += 20;

            doc.setFontSize(12);
            const textoDeclaracao = "Declaro ter recebido da empresa TELLERINA COMÉRCIO DE PRESENTES E\nARTIGOS PARA DECORAÇÃO S/A, CNPJ: 84.453.844/0342-44 a título de\n" +
                "empréstimo, o equipamento cujas características estão abaixo, para o meu uso\nexclusivo, responsabilizando-me pelo seu uso e sua guarda.";
            doc.text(textoDeclaracao, 15, yOffset);
            yOffset += 40;

            // ----------------------------------------------------
            // FUNÇÃO AUXILIAR PARA PEGAR VALOR DOS RADIOS
            // ----------------------------------------------------
            function getRadioValue(name) {
                const radios = document.getElementsByName(name);
                for (let i = 0; i < radios.length; i++) {
                    if (radios[i].checked) {
                        return radios[i].value;
                    }
                }
                return 'Não Informado';
            }

            // ----------------------------------------------------
            // DADOS DO FORMULÁRIO E ADICIONAR NO PDF
            // ----------------------------------------------------
            doc.setFontSize(14);
            doc.text("Dados do Colaborador", 15, yOffset);
            doc.setFontSize(12);
            yOffset += 10;
            doc.text(`Nome do Colaborador: ${document.getElementById('nome-colaborador').value}`, 15, yOffset);
            yOffset += 8;
            doc.text(`Matrícula - RE: ${document.getElementById('matricula-colaborador').value}`, 15, yOffset);
            yOffset += 8;
            doc.text(`Cargo: ${document.getElementById('cargo-colaborador').value}`, 15, yOffset);
            yOffset += 8;
            doc.text(`Departamento: ${document.getElementById('departamento-colaborador').value}`, 15, yOffset);
            yOffset += 8;
            doc.text(`E-mail: ${document.getElementById('email-colaborador').value}`, 15, yOffset);
            yOffset += 20;

            doc.setFontSize(14);
            doc.text("Informações do Equipamento", 15, yOffset);
            doc.setFontSize(12);
            yOffset += 10;
            doc.text(`Equipamento - Tipo: ${document.getElementById('equipamento').value}`, 15, yOffset);
            yOffset += 8;
            doc.text(`Marca: ${document.getElementById('marca').value}`, 15, yOffset);
            yOffset += 8;
            doc.text(`Modelo: ${document.getElementById('modelo').value}`, 15, yOffset);
            yOffset += 8;
            doc.text(`S/N - Número de Série: ${document.getElementById('numero-serie').value}`, 15, yOffset);
            yOffset += 8;
            doc.text(`Patrimônio: ${document.getElementById('Patrimônio').value}`, 15, yOffset);
            yOffset += 20;

            // ----------------------------------------------------
            // CHECKLIST GERAL
            // ----------------------------------------------------
            doc.setFontSize(14);
            doc.text("Checklist Geral", 15, yOffset);
            doc.setFontSize(12);
            yOffset += 10;
            doc.text(`Fotos tiradas e anexadas no termo: ${getRadioValue('fotos-anexadas')}`, 15, yOffset);
            yOffset += 8;
            doc.text(`Conector Fonte: ${getRadioValue('conector-fonte')}`, 15, yOffset);
            yOffset += 8;
            doc.text(`Carregador: ${getRadioValue('carregador')}`, 15, yOffset);
            yOffset += 8;
            doc.text(`Conectores: ${getRadioValue('conectores')}`, 15, yOffset);
            yOffset += 8;
            doc.text(`Parafusos da Carcaça: ${getRadioValue('parafusos')}`, 15, yOffset);
            if (document.getElementById('obs-parafusos').value) {
                yOffset += 8;
                doc.text(`Observação Parafusos: ${document.getElementById('obs-parafusos').value}`, 25, yOffset);
            }
            yOffset += 8;
            doc.text(`Estado do Teclado: ${getRadioValue('teclado-estado')}`, 15, yOffset);
            if (document.getElementById('obs-teclado').value) {
                yOffset += 8;
                doc.text(`Observação Teclado: ${document.getElementById('obs-teclado').value}`, 25, yOffset);
            }
            yOffset += 8;
            doc.text(`Estado do Touchpad: ${getRadioValue('touchpad-estado')}`, 15, yOffset);
            if (document.getElementById('obs-touchpad').value) {
                yOffset += 8;
                doc.text(`Observação Touchpad: ${document.getElementById('obs-touchpad').value}`, 25, yOffset);
            }
            yOffset += 20;

            // ----------------------------------------------------
            // CÓDIGO PARA ADICIONAR IMAGENS
            // ----------------------------------------------------
            doc.setFontSize(14);
            doc.text("Fotos do Equipamento", 15, yOffset);
            yOffset += 10;

            const imageFiles = [
                { id: 'tela', label: 'Tela' },
                { id: 'teclado-foto', label: 'Teclado' },
                { id: 'lateral-direita', label: 'Lateral Direita' },
                { id: 'lateral-esquerda', label: 'Lateral Esquerda' },
                { id: 'tampa-fechada', label: 'Tampa Fechada' }
            ];

            for (const img of imageFiles) {
                const input = document.getElementById(img.id);
                if (input.files && input.files[0]) {
                    const file = input.files[0];
                    const base64 = await readImage(file);

                    if (yOffset + 130 > doc.internal.pageSize.height) {
                        doc.addPage();
                        yOffset = 15;
                    }

                    doc.setFontSize(12);
                    doc.text(img.label, 15, yOffset);
                    yOffset += 5;
                    doc.addImage(base64, 'JPEG', 15, yOffset, 180, 120);
                    yOffset += 130;
                }
            }

            // ----------------------------------------------------
            // ADICIONAR TEXTO DE DECLARAÇÃO FINAL E DATA
            // ----------------------------------------------------
            if (yOffset + 100 > doc.internal.pageSize.height) {
                doc.addPage();
                yOffset = 15;
            }

            const textoFinal = "Declaro, ainda que estar ciente de que:\n" +
                "(a) o equipamento deverá ser usado exclusivamente para\no cumprimento de minhas atividades profissionais;\n" +
                "(b) deverei utilizar o equipamento com prudência e\ncautela, zelando por sua conservação e manutenção, obrigando-me a devolvê-lo\n" +
                "sempre que solicitado pela TELLERINA COMÉRCIO DE PRESENTES E ARTIGOS PARA\n DECORAÇÃO S/A, em perfeito estado de funcionamento e conservação, salvo os\ndesgastes do uso normal;\n" +
                "(c) Em caso de danos recorrentes de mau uso causados ao equipamento, deverei comunicar\n imediatamente ao time da TI e a área em que atuo será responsável por arcar com\n" +
                "os custos de reposição de um novo equipamento\n (d) É de sua responsabilidade realizar a higienização\n" +
                "utilizando álcool isopropílico. Não usar álcool em gel ou qualquer outro tipo\nde abrasivo que danifique o equipamento.\n (e) Em caso de furto ou roubo do equipamento, deverei\n" +
                "providenciar o BO com as informações do modelo e número de série do equipamento\n e enviar para o time da TI. Caso contrário, estou ciente que será tratado o\n" +
                "caso como perda e a área em que atuo será responsável por arcar com os custos\n de reposição de um novo equipamento\n" +
                "(f) No caso de eventual viagem ao exterior, OBRIGO-ME\n a registrar o equipamento, como bagagem junto à Polícia Federal, ficando ciente\n" +
                "de que, na hipótese de o equipamento ser apreendido, serei responsável pelas\n despesas de multas impostas pelo fisco\n" +
                "(g) Em caso de desligamento, deverei devolver o\n equipamento nas mesmas condições em que me foi entregue, exceto pelo desgasto\n" +
                "normal de uso para TELLERINA COMÉRCIO DE PRESENTES E ARTIGOS PARA DECORAÇÃO\n" +
                "________________________________________________________________-" +
                "Assinatura Colaborador : _______________________________________________________" +
                "Assinatura Responsavel : ________________________________________________________";

            // Adiciona o texto de declaração final
            doc.text(textoFinal, 15, yOffset, { maxWidth: 180 });
            yOffset += doc.getTextDimensions(textoFinal, { maxWidth: 180 }).h + 20;

            // Adiciona a data atual
            const hoje = new Date();
            const dataFormatada = hoje.toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' });
            doc.text(`São Paulo, ${dataFormatada}`, 15, yOffset);
            yOffset += 20;

            // Adiciona os campos de assinatura
            doc.text(`De acordo,`, 15, yOffset);
            doc.line(80, yOffset + 5, 200, yOffset + 5); // Linha para a assinatura
            doc.text(`Assinatura:`, 15, yOffset + 15);
            doc.line(80, yOffset + 20, 200, yOffset + 20); // Linha para a assinatura

            // Salva o PDF após todas as operações assíncronas
            doc.save('termo-responsabilidade.pdf');
        }
    </script>
</body>
</html>