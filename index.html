<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vivara - Termo de Responsabilidade</title>
    <link rel="shortcut icon" href="imagens/tellerina-icon.png" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    
     <style>
        @import url('https://fonts.googleapis.com/css2?family=Cossette+Titre:wght@400;700&family=Roboto:ital,wdth@0,75..100;1,75..100&display=swap');

        /* Estilos globais para o corpo e o cabeçalho */
        body {
            background-color: #ffffff;
            font-family: Arial, Helvetica, sans-serif;
            margin: 0;
            padding: 20px;
        }

        header {
            text-align: center;
            font-family: "Roboto", sans-serif;
            text-shadow: -9px 7px 20px #635a54;
            display: none;
        }

        h1 {
            font-family: "Roboto", sans-serif;
        }

        h5 {
            text-align: center;
            font-size: 20px;
            font-family: "Roboto", sans-serif;
        }
        
        /* Estilo da barra lateral que foi adicionada */
        aside {
            width: 300px;
            position: fixed;
            top: 0;
            left: 0;
            height: 100vh;
            background-color: #ECA57F;
            padding: 20px;
            box-sizing: border-box;
            border-right: 2px solid #D36D48;
            z-index: 10;
        }

        aside h1 {
            margin-top: 50px;
            text-align: center;
        }

        aside p {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            color: #4A4A4A;
        }

        /* Ajuste do corpo principal para não ficar por baixo da barra lateral */
        main {
            margin-left: 320px;
            max-width: 1000px;
            padding: 20px;
            margin: 0 auto;
        }


        /* Estilos para o formulário */
        fieldset {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto 40px auto;
            border-radius: 10px;
            box-shadow: -7px 9px 20px black;
            background-color: #f8f8f8;
            padding: 20px;
            box-sizing: border-box;
            border: 1px solid #e2976e;
        }

        legend {
            text-align: center;
            font-size: 20px;
            padding: 0 10px;
            font-weight: bold;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 20px;
            text-align: justify;
        }

        input[type="text"],
        input[type="email"],
        textarea,
        select,
        input[type="file"] {
            display: block;
            margin-bottom: 15px;
            width: 100%;
            padding: 10px;
            box-sizing: border-box;
            border-radius: 20px;
            border: 1px solid #ccc;
        }

        textarea#obs-touchpad{
            font-size: 20px;
            font-weight: bold;
            text-align: center;

        }
        textarea#obs-touchpad:hover{
            background-color: gray;
            color: white;
            cursor: pointer;
        }

        /* Estilos específicos para o checklist */
        .checklist {
            border-style: solid;
            border-color: #4A4A4A;
            border-width: 1px;
            padding: 10px;
            margin-bottom: 15px;
            border-radius: 10px;
        }

        .checklist label {
            display: inline-block;
            font-weight: normal;
            font-size: 16px;
            margin-right: 15px;
        }

        .checklist input[type="radio"] {
            display: inline-block;
            width: auto;
            margin-right: 5px;
        }

        /* Estilos para o botão */
        button {
            display: block;
            margin: 20px auto;
            padding: 10px 20px;
            font-size: 18px;
            cursor: pointer;
            background-color: #D36D48;
            color: white;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }

        button:hover {
            background-color: #a35034;
        }

        /* Estilos para o details/summary */
        details summary {
            cursor: pointer;
            font-weight: bold;
            margin-bottom: 10px;
        }

        details textarea {
            width: 100%;
            margin-top: 5px;
            padding: 5px;
            box-sizing: border-box;
        }
    </style>

<body>

    <aside style="width: 340px; position: fixed;">
        <div style="width: 300px;">
        <h1><img src="imagens/vivara-logo.png" alt="" width="200px" height="50px"></h1>
        <p>Termo de Responsabilidade</p>
        <p>Certifique-se das Informações</p>
        <textarea id="obs-touchpad" required placeholder="Numero do Chamado"></textarea>
        </div>
    </aside>

    <header>
        <h1>Termo de Responsabilidade WEB</h1>
    </header>

    <main>
        <h5>Preencha todos as informações e imprima em PDF para gerar o Termo</h5>
        <label for="nome-responsavel" style="text-align: center;">Responsavel (TI): 
            <input type="text" id="responsavel" style="display: block; margin: 0 auto;" required>
        </label>

        <fieldset>
            <legend>Dados do Colaborador</legend>
            <div class="nome-matricula">
                <label for="nome-colaborador">Nome do Colaborador</label>
                <input type="text" id="nome-colaborador">

                <label for="matricula-colaborador">Matricula - RE</label>
                <input type="text" id="matricula-colaborador">
            </div>

            <div class="cargo-departamento-email">
                <label for="cargo-colaborador">Cargo</label>
                <input type="text" id="cargo-colaborador">

                <label for="departamento-colaborador">Departamento</label>
                <input type="text" id="departamento-colaborador">

                <label for="email-colaborador">E-mail</label>
                <input type="email" id="email-colaborador">
            </div>
        </fieldset>

        <fieldset>
            <legend>Informações do Equipamento</legend>
            <div class="div-equipamento">
                <label for="equipamento">Equipamento - Tipo</label>
                <input type="text" id="equipamento">

                <label for="marca">Marca</label>
                <input type="text" id="marca">

                <label for="modelo">Modelo</label>
                <input type="text" id="modelo">

                <label for="numero-serie">S/N - Número de Série</label>
                <input type="text" id="numero-serie">

                <label for="Patrimônio">Patrimônio</label>
                <input type="text" id="Patrimônio">
            </div>
        </fieldset>

        <fieldset>
            <legend>Checklist Geral - Onboarding</legend>

            <div class="checklist">
                <label>Fotos tiradas e anexadas no termo?</label><br>
                <input type="radio" name="fotos-anexadas" value="Sim"> <label>Sim</label>
                <input type="radio" name="fotos-anexadas" value="Não"> <label>Não</label>
            </div> <br>

            <div class="checklist">
                <label>Conector Fonte</label> <br>
                <input type="radio" name="conector-fonte" value="Em Condições"> <label>Em Condições</label>
                <input type="radio" name="conector-fonte" value="Danificado"> <label>Danificado</label>
            </div> <br>

            <div class="checklist">
                <label>Carregador - Cabo de Energia tipo C</label> <br>
                <input type="radio" name="carregador" value="Em Condições"> <label>Em Condições</label>
                <input type="radio" name="carregador" value="Danificado"> <label>Danificado</label>
            </div> <br>

            <div class="checklist">
                <label>Conectores USB, HDMI, ETHERNET, ETC.</label> <br>
                <input type="radio" name="conectores" value="Em Condições"> <label>Em Condições</label>
                <input type="radio" name="conectores" value="Danificado"> <label>Danificado</label>
            </div> <br>

            <div class="checklist">
                <label>Parafusos da Carcaça</label> <br>
                <input type="radio" name="parafusos" value="Em Condições"> <label>Em Condições</label>
                <input type="radio" name="parafusos" value="Faltando"> <label>Faltando</label>

                <details>
                    <summary>Faltando parafusos? Informe aqui</summary>
                    <textarea id="obs-parafusos"></textarea>
                </details> 
            </div> <br>

            <div class="checklist">
                <label>Estado do Teclado</label> <br>
                <input type="radio" name="teclado-estado" value="Em Condições"> <label>Em Condições</label>
                <input type="radio" name="teclado-estado" value="Danificado"> <label>Danificado</label>
                <textarea id="obs-teclado" placeholder="Informe Observações"></textarea> 
            </div>

            <div class="checklist">
                <label>Estado do Touchpad</label> <br>
                <input type="radio" name="touchpad-estado" value="Em Condições"> <label>Em Condições</label>
                <input type="radio" name="touchpad-estado" value="Danificado"> <label>Danificado</label>
            </div>
        </fieldset>

        <fieldset>
            <legend>Fotos do Equipamento</legend>
            <label for="tela">Tela</label>
            <input type="file" id="tela" accept="image/jpeg, image/png">

            <label for="teclado-foto">Teclado</label>
            <input type="file" id="teclado-foto" accept="image/jpeg, image/png">

            <label for="lateral-direita">Lateral Direita</label>
            <input type="file" id="lateral-direita" accept="image/jpeg, image/png">

            <label for="lateral-esquerda">Lateral Esquerda</label>
            <input type="file" id="lateral-esquerda" accept="image/jpeg, image/png">

            <label for="tampa-fechada">Tampa Fechada</label>
            <input type="file" id="tampa-fechada" accept="image/jpeg, image/png">
            

            <label for="tampa-traseira">Tampa Traseira</label>
            <input type="file" id="tampa-traseira" accept="image/jpeg, image/png">  
        </fieldset>

        <button onclick="gerarPDF()">Baixar Termo em PDF</button>

    </main>

    <footer>
        Desenvolvido por: Renan Marques
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.14/jspdf.plugin.autotable.min.js"></script>


    <script>
       async function gerarPDF() {
    const { jsPDF } = window.jspdf;
    const doc = new jsPDF();
    let yOffset = 15; // Posição vertical inicial

    // Função para ler o arquivo de imagem e retornar uma Promessa
    const readImage = (file) => {
        return new Promise((resolve) => {
            const reader = new FileReader();
            reader.onload = () => resolve(reader.result);
            reader.readAsDataURL(file);
        });
    };

    // --- CÓDIGO DO CABEÇALHO ---
    const logoTellerina = 'imagens/tellerina-icon.png';
    doc.addImage(logoTellerina, 'PNG', 15, 10, 50, 15);
    yOffset = 40;

    doc.setFontSize(14);
    doc.setFont('helvetica', 'bold')
    doc.text("TERMO DE RESPONSABILIDADE DE EQUIPAMENTOS DE TI", 105, yOffset, null, null, "center");
    yOffset += 20;

    doc.setFontSize(12);
    const textoDeclaracao = "Declaro ter recebido da empresa TELLERINA COMÉRCIO DE PRESENTES E\nARTIGOS PARA DECORAÇÃO S/A, CNPJ: 84.453.844/0342-44 a título de\n empréstimo, o equipamento cujas características estão abaixo, para o meu uso\nexclusivo, responsabilizando-me pelo seu uso e sua guarda.";
    doc.text(textoDeclaracao, 15, yOffset);
    yOffset += 20;

    // --- FUNÇÃO AUXILIAR PARA PEGAR VALOR DOS RADIOS ---
    function getRadioValue(name) {
        const radios = document.getElementsByName(name);
        for (let i = 0; i < radios.length; i++) {
            if (radios[i].checked) {
                return radios[i].value;
            }
        }
        return 'Não Informado';
    }

    // --- TABELA DE DADOS DO COLABORADOR ---
    const dadosColaborador = [
        ['Nome do Colaborador', document.getElementById('nome-colaborador').value || ''],
        ['Matrícula - RE', document.getElementById('matricula-colaborador').value || ''],
        ['Cargo', document.getElementById('cargo-colaborador').value || ''],
        ['Departamento', document.getElementById('departamento-colaborador').value || ''],
        ['E-mail', document.getElementById('email-colaborador').value || '']
    ];

    doc.setFontSize(14);
    yOffset += 2; // Espaço antes da tabela

    doc.autoTable({
        startY: yOffset,
        head: [['', 'Dados do Colaborador']],
        body: dadosColaborador,
        theme: 'striped', // Tema visual da tabela
        headStyles: { fillColor: [236, 165, 127], textColor: [74, 74, 74] }, // Cor de fundo e texto do cabeçalho
        bodyStyles: { textColor: [74, 74, 74] },
        columnStyles: {
            0: { fontStyle: 'bold', cellWidth: 50 }, // Estilo da primeira coluna (Campo)
            1: { cellWidth: 'auto' } // Estilo da segunda coluna (Informação)
        }
    });

    yOffset = doc.autoTable.previous.finalY + 20; // Atualiza yOffset após a tabela

    // --- TABELA DE INFORMAÇÕES DO EQUIPAMENTO ---
    const dadosEquipamento = [
        ['Equipamento - Tipo', document.getElementById('equipamento').value || ''],
        ['Marca', document.getElementById('marca').value || ''],
        ['Modelo', document.getElementById('modelo').value || ''],
        ['S/N - Número de Série', document.getElementById('numero-serie').value || ''],
        ['Patrimônio', document.getElementById('Patrimônio').value || '']
    ];

    doc.setFontSize(14);
    yOffset += 3;

    doc.autoTable({
        startY: yOffset,
        head: [['', 'Dados do Equipamento']],
        body: dadosEquipamento,
        theme: 'striped',
        headStyles: { fillColor: [236, 165, 127], textColor: [74, 74, 74] },
        bodyStyles: { textColor: [74, 74, 74] },
        columnStyles: {
            0: { fontStyle: 'bold', cellWidth: 50 },
            1: { cellWidth: 'auto' }
        }
    });

    yOffset = doc.autoTable.previous.finalY + 20;

    // --- TABELA DE CHECKLIST GERAL ---
    const dadosChecklist = [
        ['Fotos tiradas e anexadas no termo', getRadioValue('fotos-anexadas')],
        ['Conector Fonte', getRadioValue('conector-fonte')],
        ['Carregador', getRadioValue('carregador')],
        ['Conectores', getRadioValue('conectores')],
        ['Parafusos da Carcaça', getRadioValue('parafusos')],
        ['Observação Parafusos', document.getElementById('obs-parafusos').value || 'N/A'],
        ['Estado do Teclado', getRadioValue('teclado-estado')],
        ['Observação Teclado', document.getElementById('obs-teclado').value || 'N/A'],
        ['Estado do Touchpad', getRadioValue('touchpad-estado')],
        ['Numero do Chamado BPM', document.getElementById('obs-touchpad').value || 'N/A']
    ];

    doc.setFontSize(14);
    doc.text("Checklist Geral", 15, yOffset); //ESPAÇO DA TABELA - EDITEI NA PAGE
    yOffset += 10;

    doc.autoTable({
        startY: yOffset,
        head: [['Item', 'Status/Observação']],
        body: dadosChecklist,
        theme: 'striped',
        headStyles: { fillColor: [236, 165, 127], textColor: [74, 74, 74] },
        bodyStyles: { textColor: [74, 74, 74] },
        columnStyles: {
            0: { fontStyle: 'bold', cellWidth: 60 },
            1: { cellWidth: 'auto' }
        }
    });

    yOffset = doc.autoTable.previous.finalY + 20;

    // --- CÓDIGO PARA ADICIONAR IMAGENS UMA AO LADO DA OUTRA ---
    doc.setFontSize(14);
    doc.text("Fotos do Equipamento", 15, yOffset);
    yOffset += 10;

    const imageFiles = [
        { id: 'tela', label: 'Tela' },
        { id: 'teclado-foto', label: 'Teclado' },
        { id: 'lateral-direita', label: 'Lateral Direita' },
        { id: 'lateral-esquerda', label: 'Lateral Esquerda' },
        { id: 'tampa-fechada', label: 'Tampa Fechada' },
        { id: 'tampa-traseira', label: 'Tampa Traseira'},
    ];

    let xOffset = 15; // Posição horizontal inicial
    const imageWidth = 80;
    const imageHeight = 60;
    const imageSpacing = 11; // Espaçamento entre as imagens

    for (const img of imageFiles) {
        const input = document.getElementById(img.id);
        if (input.files && input.files[0]) {
            const file = input.files[0];
            const base64 = await readImage(file);

            // Verifica se a próxima imagem ultrapassa a largura da página
            if (xOffset + imageWidth > doc.internal.pageSize.width - 15) {
                // Se sim, avança para a próxima linha
                xOffset = 15;
                yOffset += imageHeight + imageSpacing;
            }

            // Adiciona a imagem no PDF
            doc.addImage(base64, 'JPEG', xOffset, yOffset, imageWidth, imageHeight);
            
            // Adiciona o label abaixo da imagem
            doc.setFontSize(10);
            doc.text(img.label, xOffset, yOffset + imageHeight + 5);

            // Atualiza a posição X para a próxima imagem
            xOffset += imageWidth + imageSpacing;
        }
    }
    yOffset += imageHeight + 20; // Garante espaço suficiente para a próxima seção

    // --- ADICIONAR TEXTO DE DECLARAÇÃO FINAL E DATA ---
    if (yOffset + 100 > doc.internal.pageSize.height) {
        doc.addPage();
        yOffset = 15;
    }

    const textoFinal = "Declaro, ainda que estar ciente de que:\n" +
        "(a) o equipamento deverá ser usado exclusivamente para o cumprimento de minhas atividades profissionais;\n" +
        "(b) deverei utilizar o equipamento com prudência e cautela, zelando por sua conservação e manutenção, obrigando-me a devolvê-lo sempre que solicitado pela TELLERINA COMÉRCIO DE PRESENTES E ARTIGOS PARA DECORAÇÃO S/A, em perfeito estado de funcionamento e conservação, salvo os desgastes do uso normal;\n" +
        "(c) Em caso de danos recorrentes de mau uso causados ao equipamento, deverei comunicar imediatamente ao time da TI e a área em que atuo será responsável por arcar com os custos de reposição de um novo equipamento\n" +
        "(d) É de sua responsabilidade realizar a higienização utilizando álcool isopropílico. Não usar álcool em gel ou qualquer outro tipo de abrasivo que danifique o equipamento.\n" +
        "(e) Em caso de furto ou roubo do equipamento, deverei providenciar o BO com as informações do modelo e número de série do equipamento e enviar para o time da TI. Caso contrário, estou ciente que será tratado o caso como perda e a área em que atuo será responsável por arcar com os custos de reposição de um novo equipamento\n" +
        "(f) No caso de eventual viagem ao exterior, OBRIGO-ME a registrar o equipamento, como bagagem junto à Polícia Federal, ficando ciente de que, na hipótese de o equipamento ser apreendido, serei responsável pelas despesas de multas impostas pelo fisco\n" +
        "(g) Em caso de desligamento, deverei devolver o equipamento nas mesmas condições em que me foi entregue, exceto pelo desgasto normal de uso para TELLERINA COMÉRCIO DE PRESENTES E ARTIGOS PARA DECORAÇÃO S/A,.\n" +
        "_________________________________________________________________\nAnalista Responsavel : ________________________________________________________";

    doc.text(textoFinal, 15, yOffset, { maxWidth: 180 });
    yOffset += doc.getTextDimensions(textoFinal, { maxWidth: 180 }).h + 20;

    // Adiciona a data atual
    const hoje = new Date();
    const dataFormatada = hoje.toLocaleDateString('pt-BR', { day: '2-digit', month: 'long', year: 'numeric' });
    doc.text(`São Paulo, ${dataFormatada}`, 15, yOffset);
    yOffset += 20;

    // Adiciona os campos de assinatura
    doc.text(`De acordo,`, 15, yOffset);
    doc.line(80, yOffset + 5, 200, yOffset + 5); // Linha para a assinatura
    doc.text(`Assinatura:`, 15, yOffset + 15);
    doc.line(80, yOffset + 20, 200, yOffset + 20); // Linha para a assinatura

    // Salva o PDF após todas as operações assíncronas
    doc.save('termo-responsabilidade.pdf');
}
    </script>
</body>
</html>